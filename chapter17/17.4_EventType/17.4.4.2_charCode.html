<html>

<head></head>

<body>
    <input id="myText" type="text">
    
    <!-- 17.4.4.2 字符编码
    
        对插入或移出字符的键, 所有浏览器都会触发keypress事件, 其他键则取决于浏览器

        浏览器在event对象上支持charCode属性, 只有发生keypress事件时这个属性才会被设置值, 包含的是按键字符对应的ASCII编码
        通常, charCode属性的值是0, 在keypress事件发生时则是对应的按键键码

        IE8及更早版本和Opera是哦那个keyCode传达字符的ASCII编码
        要以跨浏览器的方式获取字符编码, 首先要检查charCode属性是否有值, 如果没有再使用keyCode

        一旦有了字母编码, 就可以使用String.fromCharCode()方法将其转换为字符
    -->
    <script>
        // 跨浏览器
        var EventUtil = {
            getCharCode: function (event) {
                if (typeof event.charCode == "number") {
                    return event.charCode;
                } else {
                    return event.keyCode;
                }
            }
        };

        let textbox = document.getElementById("myText");
        textbox.addEventListener("keypress", event => {
            let code = EventUtil.getCharCode(event);
            console.log(code, String.fromCharCode(code));
        });
    </script>
</body>

</html>