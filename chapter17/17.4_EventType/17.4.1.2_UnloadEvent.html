<html>

<head></head>

<body onunload="console.log('unload from <body>')">
    <!-- 17.4.1.2 unload事件
    
        与load事件相对的是unload事件, unload事件会在文档卸载完成后触发
        unload事件一般是从一个页面导航到另一个页面时触发, 最常用于清理引用, 以避免内存泄漏
        与load事件类似, unload事件处理程序也有两种指定方式

        第一种是JS方式
        第二种是给<body>元素添加onunload属性
        
        这个事件生成的event对象在DOM合规的浏览器中只有target属性, 值为document对象
        IE8及更早版本在这个事件上不提供srcElement属性

        无论使用何种方式, 都要注意事件处理程序中的代码
        因为unload事件是在页面卸载完成后触发的, 所以不能使用页面加载后才有的对象
        此时要访问DOM或修改页面外观都会导致错误

        注意
        根据DOM2 Events, unload事件应该在<body>而非window上触发
        可是为了向后兼容, 所有浏览器都在window上实现了unload事件
    -->
    <script>
        // JS方式
        window.addEventListener("unload", event => console.log("unload from JS"));
    </script>
</body>

</html>