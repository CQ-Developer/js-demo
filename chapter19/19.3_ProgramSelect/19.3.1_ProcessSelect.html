<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <form>
        <select name="location" id="slLocation">
            <option value="Synnyvale, CA">Sunnyvale</option>
            <option value="Los Angeles, CA">Los Angeles</option>
            <option value="Mountain View, CA">Mountain View</option>
            <option value="">China</option>
            <option>Australia</option>
        </select>
    </form>

    <!-- 19.3.1 选项处理
    
    对于只允许选择一项的选择框, 获取选项最简单的方式时使用选择框的selectedIndex属性

    对于允许多选的选择框, selectedIndex属性就像只允许选择一项一样
    设置selectedIndex会移除所有选项, 只选择指定的项, 而获取selectedIndex指挥返回选中的第一项的索引

    选项还可以通过取得选项的引用并将其selected属性设置为true来选中

    与selectedIndex不同, 设置选项的selected属性不会在多选时移除其他选项, 从而可以动态选择任意多个选项
    如果修改单选框中的selected属性, 则其他选项会被移除
    要注意, 把selected属性设置为false对单选框没有影响

    通过selected属性可以确定选择框中哪个选项被选中
    要取得所有选中项, 需要循环选项集合逐个检测selected属性
    -->
    <script>
        let selectbox = document.forms[0].elements["location"];

        // 选中第二项
        selectbox.options[1].selected = true;

        // 访问选项的信息
        let selectedIndex = selectbox.selectedIndex;
        let selectedOption = selectbox.options[selectedIndex];
        console.log(`selected index: ${selectedIndex}`);
        console.log(`selected text: ${selectedOption.text}`);
        console.log(`selected value: ${selectedOption.value}`);

        // 遍历选项集合筛选被选中项
        function getSelectedOptions(selectbox) {
            let result = [];
            for (let option of selectbox.options) {
                if (option.selected) {
                    result.push(option);
                }
            }
            return result;
        }

        // 获取所有被选中的项
        let selectedOptions = getSelectedOptions(selectbox);
        console.log(`${selectedOptions.length} options has been selected`);
        for (let option of selectedOptions) {
            console.log(`selected index: ${option.index}`);
            console.log(`selected text: ${option.text}`);
            console.log(`selected value: ${option.value}`);
        }
    </script>
</body>

</html>