<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <!-- 24.7.2 发送和接收数据
        https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send
        https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/message_event

    打开WebSocket之后, 可以通过连接发送和接收数据
    要向服务器发送数据, 使用send()方法并传入一个字符串, ArrayBuffer, Blob

    服务器向客户端发送消息时, WebSocket对象上会触发message事件
    这个message事件与其他消息协议类似, 可以通过event.data属性访问有效荷载

    与通过send()方法发送的数据类似, event.data返回的数据也可能是ArrayBuffer, Blob
    这由WebSocket对象的binaryType属性决定, 该属性决定可能是"blob"或"arraybuffer"
    -->
    <script>
        let socket = new WebSocket("ws://www.example.com/server.php");
        
        // 发送数据
        let stringData = "Hello World";
        let arrayBufferData = Uint8Array.from(["f", "o", "o"]);
        let blobData = new Blob(["f", "o", "o"]);

        socket.send(stringData);
        socket.send(arrayBufferData);
        socket.send(blobData);

        // 接收数据
        socket.addEventListener("message", event => console.log(event.data));
    </script>
</body>

</html>