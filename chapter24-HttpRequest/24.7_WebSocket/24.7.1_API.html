<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <!-- 24.7.1 API
        https://developer.mozilla.org/en-US/docs/Web/API/WebSocket
    
    要创建一个新的 Web Socket, 就要实例化一个WebSocket对象并传入提供链接的URL

    注意, 必须给WebSocket构造函数传入一个绝对URL
    同源策略不适用于WebSocket, 因此可以打开到任意站点的链接
    至于是否与来自特定源的页面通信, 则完全却决于服务器, 在握手阶段就可以确定请求来自哪里

    浏览器会在初始化WebSocket对象之后立即创建链接
    与XHR类似, WebSocket也有一个readyState属性表示当前状态
    不过, 这个值与XHR中相应的值不一样
    - WebSocket.OPENING(0): 连接正在建立
    - WebSocket.OPEN(1): 连接已经建立
    - WebScoket.CLOSING(2): 连接正在关闭
    - WebScoket.CLOSE(3): 连接已经关闭

    WebSocket对象没有readystatechange事件, 而是有与上述不同状态对应的其他事件
    readyState值从0开始

    任何时候都可以调用close()方法关闭WebSocket连接
    调用close()之后, readyState立即变为2, 并会在关闭后变为3
    -->
    <script>
        // 创建WebSocket
        let socket = new WebSocket("ws://www.example.com/server.php");
        // 关闭连接
        socket.close();
    </script>
</body>

</html>