<html>
    <body>
        <!-- 14.3.1.1 observe方法 -->
        <script>
            /**
             * 新创建的MutationObserver实力不会关联DOM的任何部分.
             * 要把这个observer与DOM关联起来, 需要使用observe()方法.
             * 该方法接收两个参数: 要观察其变化的DOM节点, MutationObserverInit对象.
             * 
             * MutationObserverInit对象用于控制观察哪些方面的变化, 是一个键值对形式配置选项的字典.
             */

            // 创建一个observer并配置它观察<body>元素上的属性变化
            let observer = new MutationObserver(() => console.log("<body> attributes changed"));
            observer.observe(document.body, { attributes: true });

            /**
             * 执行上述代码后, <body>元素上任何属性发生变化都会被这个MutationObserver实例发现,
             * 然后就会异步执行注册的回调函数.
             * <body>元素后代的修改或其他非属性修改都不会出发回调进入任务队列.
             */

            // 验证代码
            // 注意, 回调中的console.log()是后执行的.
            // 这表明回调并非与实际的DOM变化同步执行.
            document.body.className = "foo";
            console.log("Chanaged body class");
        </script>
    </body>
</html>
