<html>
    <!-- 14.2.4 使用NodeList -->
    <body>
        <div>a</div>
        <script>
            /**
             * 理解NodeList对象和相关的NamedNodeMap, HTMLCollection, 是理解DOM编程的关键.
             * 这3个集合类型都是实时的, 意味着文档结构的变化会实时地在它们身上反映出来, 因此它们的值始终代表最新的状态.
             * 实际上, NodeList就是基于DOM文档的实时查询.
             */

            // 这段代码会导致无限循环
            // let divs = document.getElementsByTagName("div");
            // for (let i = 0; i < divs.length; i++) {
            //    let div = document.createElement("div");
            //    document.body.appendChild(div);
            // }

            // 使用ES6迭代器并不会解决这个问题
            // for (let div of document.getElementsByTagName("div")) {
            //     let newDiv = document.createElement("div");
            //     document.body.appendChild(newDiv);
            // }

            // 可以使用一个变量保存长度
            // 这里也可以反向迭代集合
            const length = document.getElementsByTagName("div").length;
            for (let i = 0; i < length; i++) {
                let div = document.createElement("div");
                document.body.insertBefore(div, document.body.lastChild);
            }
        </script>
    </body>
</html>