<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <!-- 27.4.11 推送通知

        https://developer.mozilla.org/en-US/docs/Web/API/PushManager
    
    3.订阅推送事件

        对于发送给 ServiceWorker 的推送消息, 必须通过服务工作者线程的 PushManager 来订阅
        这样 ServiceWorker 就可以在 push 事件处理程序中处理推送消息
    -->
    <script>
        // 来自服务器的公钥
        let key = "123";
        // 使用 ServiceWorkerRegistration.pushManager 订阅推送消息
        navigator.serviceWorker.register("./3_subscribe.js").then((registration) => {
            registration.pushManager.subscribe({ applicationServerKey: key, userVisibleOnly: true });
        });
    </script>
</body>

</html>