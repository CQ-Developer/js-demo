<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <!-- 20.7.1 通知权限
    
    Notifications API 有被滥用的可能, 因此默认会开启两项安全措施
    1.通知只能在运行在安全上下文的代码中被触发
    2.通知必须按照每个源的原则明确得到用户允许

    用户授权显示通知是通过浏览器内部的一个对话框完成的
    除非用户没有明确给出允许或拒绝的答复, 否则这个权限请求对每个域只会出现一次
    浏览器会记住用户的选择, 如果被拒绝则无法重来

    可以使用全局对象Notification向用户请求通知权限
    该对象有一个requestPermission()方法, 返回一个Promise, 用户在授权对话框上执行操作后这个Promise会解决

    "granted"意味着用户明确授权了显示通知的权限
    除此之外的其他值意味着显示通知会静默失败
    如果用户拒绝授权, 这个值就是"denied"
    一旦拒绝, 就无法通过编程方式挽回, 因为不可能再触发授权提示
    -->
    <script>
        Notification.requestPermission().then(permission => console.log("User responsed to permission request:", permission));
    </script>
</body>

</html>