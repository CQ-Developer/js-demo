<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <!-- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise -->
    <script>
        let asyncController;

        let ps1 = new Promise((resolve, reject) => {
            console.log(1);
            asyncController = () => {
                console.log(2);
                resolve();
                console.log(3);
            };
            console.log(4);
        });

        // onResolved handler is always async
        // same in the onRejected handler and onFinally handler
        let ps2 = ps1.then(() => console.log(5));

        console.log(6);

        // the handlers async execution is guaranteed by JavaScript runtime
        // even if they was defined before upstream Promise resolved.
        asyncController();
    </script>
</body>

</html>